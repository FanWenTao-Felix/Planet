`Java Memory Model`(`java`内存模型)本身是一种抽象的概念, 并不是真实存在的, 它描述的是一组规则, 通过这组规范定义了程序种各个变量的访问方式.

## JMM关于同步的规定

1、线程解锁前，必须把共享变量**立刻**刷新回主存

2、线程加锁前，必须读取主存中的最新值到工作内存中

3、加锁和解锁是同一把锁



`JMM模型的线程工作：` 各个线程对主内存中共享变量X的操作都是各个线程各自拷贝到自己的工作内存操作后再协会主内存中。

```
由于JVM 运行程序的实体是线程，而每个线程创建时 JVM 都会为其创建一个工作内存（有些地方称为栈空间），工作内存是每个线程的私有数据区域，而 Java 内存模型中规定所有变量都存储在主内存，主内存是共享内存区域，所有线程都可以访问，但线程对变量的操作（读取赋值等）必须在工作内存中进行，首先要将变量从主内存拷贝到自己的工作内存空间，然后对变量进行操作，操作完成后再将变量写回主内存，不能直接操作主内存中的变量，各个线程中的工作内存中存储着主内存中的变量副本拷贝，因此不同的线程间无法访问对方的工作内存，线程问的通信（传值）必须通过主内存来完成，其简要访问过程如下图：
```

![](https://youpaiyun.zongqilive.cn/image/20200421161724.png)









