## 什么是循环依赖

多个bean之间相互依赖, 形成了一个闭环.

所谓的循环依赖是指，A 依赖 B，B 又依赖 A，它们之间形成了循环依赖。或者是 A 依赖 B，B 依赖 C，C 又依赖 A，形成了循环依赖。更或者是自己依赖自己。它们之间的依赖关系如下：

![](https://youpaiyun.zongqilive.cn/image/20201126143432.png)

通常来说, 如果问spring容器内部如何解决循环依赖, 一定是值 默认的单例bean中, 属性互相引用的场景

![](https://youpaiyun.zongqilive.cn/image/20201124104946.png)







三级缓存分别是什么? 三个Map有什么异同?

spring容器是什么

如何检测是否存在循环依赖? 见过循环依赖的异常吗?

多例的情况下, 循环依赖问题为什么无法解决?



### 什么情况下循环依赖可以被处理

1. 出现循环依赖的Bean必须要是单例
2. 依赖注入的方式不能全是构造器注入的方式（很多博客上说，只能解决setter方法的循环依赖，这是错误的）

A先于B进行创建

| 依赖情况               | 依赖注入方式                                       | 循环依赖是否被解决 |
| :--------------------- | :------------------------------------------------- | :----------------- |
| AB相互依赖（循环依赖） | 均采用setter方法注入                               | 是                 |
| AB相互依赖（循环依赖） | 均采用构造器注入                                   | 否                 |
| AB相互依赖（循环依赖） | A中注入B的方式为setter方法，B中注入A的方式为构造器 | 是                 |
| AB相互依赖（循环依赖） | B中注入A的方式为setter方法，A中注入B的方式为构造器 | 否                 |











