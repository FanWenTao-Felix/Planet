![](https://youpaiyun.zongqilive.cn/image/20200318143732.png)



![](https://youpaiyun.zongqilive.cn/image/20200318143641.png)

说明:

- **Java 8**把**永久区**换成了**元空间**

- **堆逻辑上由”新生+养老+元空间“三个部分组成，物理上由”新生+养老“两个部分组成**

- 当执行`new Person()；`时，其实是new在新生区的伊甸园区，然后往下走，走到养老区，但是并未到元空间。

![](https://youpaiyun.zongqilive.cn/image/20200318144424.png)



## 注意点

- GC发生在伊甸园区，当对象快占满新生代时，就会发生YGC（Young GC，轻量级GC）操作，伊甸园区基本全部清空
- 幸存者0区(S0)，别名“from区”。伊甸园区没有被YGC清空的对象将移至幸存者0区，幸存者1区别名“to 区”
- 每次进行YGC操作，幸存的对象就会从伊甸园区移到幸存者0区，如果幸存者0区满了，就会继续往下移，如果经历数次YGC操作对象还没有消亡，最终会来到养老区
- 如果到最后，养老区也满了，那么就对养老区进行FGC(Full GC，重GC)，对养老区进行清洗
- 如果进行了多次FGC之后，还是无法腾出养老区的空间，就会报**OOM（out of Memory）**异常
- **from区和to区位置和名分不是固定的，每次GC过后都会交换，GC交换后，谁空谁是to区**



























































































































