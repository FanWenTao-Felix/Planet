## 原子性(Atomicity)

事务中的语句要么全执行，要么全不执行



## 原理

实现主要基于`undo log`, 也称回滚日志，主要用于记录数据被修改前的信息.

主要记录数据的逻辑变化。所以需要将之前的操作都记录下来，然后在发生错误或执行事务回滚时才能保证回滚到之前的操作。



#### 请求过程是怎么实现的？

比如当写请求为 insert 操作进入到数据库服务层时，会先在缓冲池下面的写缓冲中进行数据的写入，然后先把写请求的物理语言写入到 read log中，并记录一条删除当前语句的逻辑语句到 undo log中。最后由 MySQL 后台线程定期刷新数据到磁盘里面。

但是这个写缓冲在5.5之前叫 **「 \**插入缓冲\**」**，只针对 insert 优化; 现在对 update 和 delete更新操作都有效。现在叫做：**「\**写缓冲\**」**

#### 这个写缓冲有什么好处呢？

避免频繁磁盘I/O的写操作，如果没得这玩意，需要在磁盘里面读到数据，然后才能做数据上面的修改。

但大多数场景下都是读多写少，如果在高并发的场景下，通过打包批次处理就能有效避免，在写操作处理时资源开销而影响到大量得读请求。