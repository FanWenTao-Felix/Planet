## 事务的隔离级别

不同的客户端或线程, 去访问mysql数据库的同一张表时, mysql提供一种机制, 来控制不同的客户端和线程对数据访问的权限, 

隔离级别定义了事务与事务之间的隔离程度, 

## 分类隔离级别

### 读未提交 read uncommitted

### 读已提交 read committed

### 可重复读 repeatable read  -- 默认

#### 关于幻读的问题说明:

![image-20190201215028080](https://ws1.sinaimg.cn/large/006tNc79ly1fzr9h9rjcvj31000gawhw.jpg)
`select`查询是读取的快照读

`update`的时候是读取最新数据(不是快照读).

### 可串行化  serializable



隔离程度 从上到下 , 越来越强



## 问题

### 脏读

当一个事务读取到另一个事务**尚未提交**的修改时, 产生脏读.

### 不可重复读

同一查询在同一事务中执行多次,由于其他提交事务所做的**修改**或者**删除**, 每次返回不同的结果集, 此时发生非重复读.

### 幻读

同一查询在同一事务中执行多次, 由于其他提交事务所做的**插入**操作,  每次返回不同的结果集, 此时发生 幻读. 

| 隔离级别                   | 脏读 | 不可重复读 | 幻读        | 加锁读 |
| -------------------------- | ---- | ---------- | ----------- | ------ |
| 读未提交(read uncommitted) | v    | v          | v           | 不加锁 |
| 读已提交(read committed)   | x    | v          | v           | 不加锁 |
| 可重复读(repeatable  read) | x    | x          | x(部分解决) | 不加锁 |
| 可串行化                   | x    | x          | x           | 加锁   |

![image-20190121203635354](https://ws3.sinaimg.cn/large/006tNc79ly1fzehizzbw9j30oa0dxafl.jpg)





## 事务的ACID特性

- 原子性(Atomicity)

  原子性是指事务是一个不可分割的工作单位, 事务中的操作要么都发生, 要么都不发生

- 一致性(Consistency)

  事务必须使数据库从一个一致性状态换到另一个一致性状态

- 隔离性(Isolation)

  事务的隔离性是从多个用户并发访问数据库时, 数据库为每一个用户开启的事务, 不能被其他事务的操作数据所干扰, 多个并发事务之间要相互隔离

- 持久性

  持久性是指一个事务一旦被提交, 它对数据库中数据的改变就是永久性的, 接下来即使数据库发生故障也不应该对其有任何影响.





