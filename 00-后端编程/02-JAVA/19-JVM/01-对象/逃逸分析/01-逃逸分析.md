使用逃逸分析, 编译器可以对代码做如下优化:

1. 同步省略. 如果一个对象被发现只能从一个线程被访问到, 那么对于这个对象的操作可以不考虑同步
2. 将堆分配转化为`栈分配`.  如果一个对象在子程序中被分配, 要使指向该对象的指针永远不会逃逸, 对象可能是栈分配的候选, 而不是堆分配
3. 分离对象或标量替换. 有的对象可能不需要作为一个连续的内存结构, 也是可以被访问到的, 那么对象的部分(或全部)可以不存储在内存, 而是存储在CPU寄存器中





## 开启逃逸分析

可以通过JVM参数指定是否开启逃逸分析: ( 从JDK1.7开始 已经默认开启)

`-XX:+DoEscapeAnalysis` :  开启

``-XX:-DoEscapeAnalysis`: 关闭