## 面试题3

对于可以转为数字的下标，PHP 会自动将其转为数字

```php
$arr = array(
    '01' => "hello",
    '10' => "world",
    '0' => "hello",
    6 => "hello",
    '1' => "hello",
    '3.14' => "ww",
);

echo '<pre/>';
foreach ($arr as $k => $v) {
    var_dump($k);
}

/*
string(2) "01"
int(10)
int(0)
int(6)
int(1)
string(4) "3.14"
*/
```





## 题目2

php字符串反转

注意中英文字符串`hello宗琦`, 属于多字节字符串.

`mb_substr`, `mb_substr`

```php
$str = 'hello字符串反转';
function rev($str, $encoding = 'utf-8')
{
    $len = mb_strlen($str, $encoding);
    $result = '';
    for ($i = $len - 1; $i >= 0; $i--) {
        $result .= mb_substr($str, $i, 1, $encoding);
    }
    return $result;
}

echo rev($str);
```

算法实现(单字节)-首尾互换

```php
$str = 'abcdefg';
$len = strlen($str);
$times = $len / 2;
for ($i = 0; $i <= $times; $i++) {
    $tmp = $str[$i];
    $str[$i] = $str[$len - $i - 1];
    $str[$len - $i - 1] = $tmp;
}
echo $str;
```

单字节PHP函数

`strrev('abcdefg')`

## 题目1

看代码输出:

```php
$str = 'php';
$str['name'] = ['zong'];
var_dump($str); // Aphp
```

解析:

在 PHP 中 string 的实现方式是一个由字节组成的数组再加上一个整数指明缓冲区长度（注意，PHP 是不能改变原字符串长度的）。

PHP 的字符串是由数组组成的, 在字符串中，我们只能通过` integer` 下标来访问每个字符，所以这个地方的`'name'`最终会被转换成数字：

```php
intval('name');
```

字符串转为数字时，字符串的开始部分决定了转换后的值。如果该字符串以合法的数值开始，则使用该数值，否则为 0。

所以上面的代码的最终结果为 0.也就变成了

```php
$str = ['zong'];
```

我们接下来再看看第二行右边的代码，由于字符串中只能存在字符串，所以右边的代码会被转换成字符串：

```php
strval(['zong']);
```

转换结果为`'Array'`，这个时候第二行代码就成了：

```php
$str = 'Array';
```

由于字符串长度是固定的，所以这个地方只能存放一个字符，所以`'Array'`中的字符赋值到` $str[0] `中只会保留第一个字符，其余的都将被抛弃。所以我们的代码就变成了:

```
$str = 'php';
$str[0] = 'A';
var_dump($str); // Aphp
```

