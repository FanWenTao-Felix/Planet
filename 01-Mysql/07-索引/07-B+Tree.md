**下面来具体介绍一下B-树（Balance Tree），一个m阶的B树具有如下几个特征：**

1.根结点至少有两个子女。

2.每个中间节点都包含k-1个元素和k个孩子，其中 m/2 <= k <= m

3.每一个叶子节点都包含k-1个元素，其中 m/2 <= k <= m

4.所有的叶子结点都位于同一层。

5.每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划。

## 3阶B+Tree

![](https://ws3.sinaimg.cn/large/006tKfTcly1g0bwczf4kvj31620hkwgs.jpg)



### 关系分析

重点看(2,6)节点, 该节点有2个元素, 2和6,  又有三个孩子, 1, (3,5), 8 . 这其中的关系正正好符合.

![](https://ws1.sinaimg.cn/large/006tKfTcly1g0bwems6xnj316e0memzd.jpg)

### 查询分析

假如要查询的数值是5. 

第一次`IO`查询,——> 9,  在内存中定位并和9比较,

第二次`IO`查询 ---> (2,6), 在内存中定位并和(2, 6)比较,

第三次`IO`查询  ---> (3, 5), 在内存中定位并和(3, 5)比较,



>  减少了`IO`次数, 多了几次内存比较

### 插入节点

插入的值是4.

自顶向下查找4的节点位置, 发现4 应当插入到节点(3,5)之间

![](https://ws3.sinaimg.cn/large/006tKfTcly1g0bwobzj0cj316k0nejtr.jpg)

节点3，5已经是两元素节点，无法再增加。父亲节点 2， 6 也是两元素节点，也无法再增加。根节点9是单元素节点，可以升级为两元素节点。于是**拆分**节点3，5与节点2，6，让根节点9升级为两元素节点4，9。节点6独立为根节点的第二个孩子。

![](https://ws4.sinaimg.cn/large/006tKfTcly1g0bwox3g8dj316c0ikgo4.jpg)



### 删除元素

删除元素11.

![](https://ws2.sinaimg.cn/large/006tKfTcly1g0bwpr51woj315m0hsgo8.jpg)

删除11后，节点12只有一个孩子，不符合B树规范。因此找出12,13,15三个节点的中位数13，取代节点12，而节点12自身下移成为第一个孩子。（这个过程称为**左旋**）



![](https://ws4.sinaimg.cn/large/006tKfTcly1g0bwr3dwz2j316u0isjty.jpg)



























 

























