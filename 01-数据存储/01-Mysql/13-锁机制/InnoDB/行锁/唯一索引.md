

```sql
create table t3
(
    `id`   int not null primary key ,
    `name` varchar(100) default null,
    unique key 'name'(name)
);

insert into t3 values (1,'1'),(2, '2'), (3, '3'), (4, '4');
```

`session1`

```sql
begin;
select * from t3 where name='4' for update;// 给唯一索引项加锁
```

`session2`

```sql
begin;
select * from t3 where name='4' for update; // 阻塞
select * from t3 where id=4 for update; // 阻塞
select * from t3 where id=1 for update; // 执行成功
```

![](http://ww2.sinaimg.cn/large/006tNc79ly1g37jf63azrj30ih0camyg.jpg)

