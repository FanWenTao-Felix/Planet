![](https://youpaiyun.zongqilive.cn/image/20200529162433.png)

## JDK9中存储结构变更
官方网址: http://openjdk.java.net/jeps/254
### 为什么要做修改呢?
目标: 提高String类和相关类的空间效率

String该类的当前实现将字符存储在 `char`数组中，每个字符使用`两个字节（十六位）`。
从许多不同的应用程序收集的数据表明，字符串是堆使用情况的主要组成部分，而且，大多数String对象仅包含Latin-1字符。
这样的字符仅需要一个字节的存储空间，因此char此类String对象的内部数组中的 一半空间未使用。

将String类的内部表示形式从UTF-16 `char数组`更改为`byte带有编码标记字段的数组`。
新String类将存储基于字符串内容编码为ISO-8859-1 / Latin-1（每个字符一个字节）或UTF-16（每个字符两个字节）的字符。
编码标志将指示使用哪种编码。

![](https://youpaiyun.zongqilive.cn/image/20200529163412.png)
