**思路**：桶为容器，一滴水为一请求。如果桶满了就拒绝请求，没满处理请求

![eK2S7d.png](https://s2.ax1x.com/2019/07/27/eK2S7d.png)

![ZowHiQ.png](https://s2.ax1x.com/2019/07/15/ZowHiQ.png)

![eK2F9P.png](https://s2.ax1x.com/2019/07/27/eK2F9P.png)

在段代码中

- 首先计算这次请求与上次请求来的时候，总共漏了多少水。
- 看一下桶里面还剩多少水，有没有溢出。
- 如果溢出了拒绝请求，如果没有添加当前一滴水。处理请求。



> 对于很多应用场景来说，除了要求能够限制数据的平均传输速率外，还要求允许某种程度的突发传输。这时候漏桶算法可能就不合适了，令牌桶算法更为适合。

什么意思呢？就是说我服务前面闲了很久，突然来了很多请求（在桶的容量内），我得快速的把这些处理了。