## 意向锁(Intention Locks)



**意向锁**是指，未来的某个时刻，事务可能要加共享/排它锁了，先提前声明一个意向。

意向锁有这样一些特点：

(1)首先，意向锁，是一个表级别的锁(table-level locking)；

(2)意向锁分为：

- **意向共享锁**(intention shared lock, IS)，它预示着，事务有意向对表中的某些行加共享S锁
- **意向排它锁**(intention exclusive lock, IX)，它预示着，事务有意向对表中的某些行加排它X锁



举个例子：

select ... lock in share mode，要设置**IS锁**；

select ... for update，要设置**IX锁**；



意向锁协议(intention locking protocol)并不复杂：

- 事务要获得某些行的S锁，必须先获得表的IS锁
- 事务要获得某些行的X锁，必须先获得表的IX锁

由于意向锁仅仅表明意向，它其实是比较弱的锁，意向锁之间并不相互互斥，而是可以并行，其**兼容互斥表**如下：

​          IS          IX

IS      兼容      兼容

IX      兼容      兼容

