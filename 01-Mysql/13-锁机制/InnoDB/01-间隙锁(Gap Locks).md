![](https://ws3.sinaimg.cn/large/006tNc79ly1fzmkqeiti3j30tz0d0q3i.jpg)

## 什么是间隙锁

用范围条件而不是相等条件查询数据,  并请求共享或者排他锁时, Innodb会给符合条件的已有数据记录的索引加锁;

对于键值在条件范围内但是并不存在的记录, 叫做`间隙`(GAP)

InnoDb 会对这个`间隙`加锁, 这种锁机制就是间隙锁

## 危害

因为query执行的过程中通过范围查找, 他会锁定整个范围内所有的索引键值, 即使这个键值并不存在.

间隙锁有一个比较致命的弱点, 就是当锁定一个范围值之后, 即使某些不存在的键值也会被无辜的锁定.而造成锁定的时候无法插入锁定键值范围内的任何数据, 在某些场景下可能会造成很大危害.