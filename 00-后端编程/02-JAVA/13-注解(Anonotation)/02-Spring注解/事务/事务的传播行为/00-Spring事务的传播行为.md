## Spring事务的传播行为

Spring事务的传播行为在`Propagation`枚举类中定义了如下几种选择

```java
public enum Propagation {
  REQUIRED(0),
  SUPPORTS(1),
  MANDATORY(2),
  REQUIRES_NEW(3),
  NOT_SUPPORTED(4),
  NEVER(5),
  NESTED(6);
}
```

**支持当前事务**

- REQUIRED (默认值)：如果当前存在事务，则加入该事务。如果当前没有事务，则创建一个新的事务
- SUPPORTS：如果当前存在事务，则加入该事务 。如果当前没有事务， 则以非事务的方式继续运行
- MANDATORY  ：如果当前存在事务，则加入该事务 。如果当前没有事务，则抛出异常

**不支持当前事务**

- REQUIRES_NEW ：创建一个新事务，如果当前存在事务，则把当前事务挂起
- NOT_SUPPORTED ：以非事务方式运行，如果当前存在事务，则把当前事务挂起
- NEVER ：以非事务方式运行，如果当前存在事务，则抛出异常

**其他情况**

- NESTED ：如果当前存在事务，则创建一个事务作为当前事务的嵌套事务来执行 。如果当前没有事务，则该取值等价于REQUIRED

  

  以NESTED启动的事务内嵌于外部事务中 （如果存在外部事务的话），此时内嵌事务并不是一个独立的事务，它依赖于外部事务。只有通过外部事务的提交，才能引起内部事务的提交，嵌套的子事务不能单独提交